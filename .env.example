# ═══════════════════════════════════════════════════════════════════════════════
# ArbDesk Environment Configuration
# ═══════════════════════════════════════════════════════════════════════════════
# Copy this file to .env and fill in your values:
#   cp .env.example .env
# ═══════════════════════════════════════════════════════════════════════════════

# ─────────────────────────────────────────────────────────────────────────────
# DATABASE (Required)
# ─────────────────────────────────────────────────────────────────────────────
POSTGRES_DB=arb_desk
POSTGRES_USER=arb
POSTGRES_PASSWORD=CHANGE_ME_STRONG_PASSWORD_HERE
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

# ─────────────────────────────────────────────────────────────────────────────
# SLACK INTEGRATION (Required for alerts)
# ─────────────────────────────────────────────────────────────────────────────
# Create a Slack App at https://api.slack.com/apps
# Bot Token: OAuth & Permissions > Bot User OAuth Token (starts with xoxb-)
# Webhook URL: Incoming Webhooks > Add New Webhook to Workspace
SLACK_BOT_TOKEN=xoxb-your-bot-token-here
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL
SLACK_DEFAULT_CHANNEL=#arb-alerts

# ─────────────────────────────────────────────────────────────────────────────
# AI DECISION GATEWAY (Optional - for smart filtering)
# ─────────────────────────────────────────────────────────────────────────────
# Supports OpenAI, Azure OpenAI, or compatible APIs
AI_API_URL=https://api.openai.com/v1/chat/completions
AI_API_KEY=sk-your-openai-api-key-here
AI_MODEL=gpt-4o-mini

# ─────────────────────────────────────────────────────────────────────────────
# SPORTSBOOK CREDENTIALS (Required for scraping)
# ─────────────────────────────────────────────────────────────────────────────
# JSON object with credentials per bookmaker
# For multi-account rotation, use arrays of credential objects
# Example with single account per book:
# BOOKMAKER_CREDENTIALS={"fanduel":{"username":"user@email.com","password":"pass123"},"draftkings":{"username":"user@email.com","password":"pass456"}}
#
# Example with multi-account rotation (for single-login books like DraftKings):
# BOOKMAKER_CREDENTIALS={"draftkings":[{"username":"acct1@email.com","password":"pass1"},{"username":"acct2@email.com","password":"pass2"}],"fanduel":{"username":"user@email.com","password":"pass123"}}
BOOKMAKER_CREDENTIALS={}

# ─────────────────────────────────────────────────────────────────────────────
# FEED CONFIGURATIONS (Required - defines what to scrape)
# ─────────────────────────────────────────────────────────────────────────────
# JSON array of feed configurations
# Each feed defines a bookmaker, URLs, selectors, and polling settings
#
# Example Connecticut sportsbooks configuration:
# FEED_CONFIGS=[
#   {
#     "bookmaker": "fanduel",
#     "enabled": true,
#     "poll_interval_seconds": 30,
#     "login_url": "https://sportsbook.fanduel.com/login",
#     "odds_urls": ["https://sportsbook.fanduel.com/navigation/nba"],
#     "sports": ["nba", "nfl", "mlb"],
#     "markets": ["moneyline", "spread", "total"],
#     "headless": true,
#     "extra_config": {
#       "username_selector": "input[type='email']",
#       "password_selector": "input[type='password']",
#       "submit_selector": "button[type='submit']",
#       "login_success_selector": "[data-test-id='user-menu']",
#       "event_container_selector": "[data-test-id='event-card']",
#       "selection_selector": "[data-test-id='outcome']",
#       "odds_selector": "[data-test-id='odds']"
#     }
#   }
# ]
FEED_CONFIGS=[]

# ─────────────────────────────────────────────────────────────────────────────
# PROXY CONFIGURATION (Recommended for stealth)
# ─────────────────────────────────────────────────────────────────────────────
# Residential proxies recommended for avoiding detection
# Supports single proxy or JSON array for rotation
#
# Single proxy:
# PROXY_HOST=us.residential-proxy.com
# PROXY_PORT=10000
# PROXY_USERNAME=your_proxy_user
# PROXY_PASSWORD=your_proxy_pass
#
# Multiple proxies for rotation (JSON array):
# PROXY_LIST=[{"host":"proxy1.com","port":10000,"username":"user1","password":"pass1"},{"host":"proxy2.com","port":10001,"username":"user2","password":"pass2"}]
PROXY_HOST=
PROXY_PORT=
PROXY_USERNAME=
PROXY_PASSWORD=
PROXY_LIST=[]

# ─────────────────────────────────────────────────────────────────────────────
# CAPTCHA SOLVING (Optional - for handling challenges)
# ─────────────────────────────────────────────────────────────────────────────
# Supports 2Captcha, Anti-Captcha, CapSolver
# Get API key from https://2captcha.com or similar service
CAPTCHA_API_KEY=
CAPTCHA_SERVICE=2captcha

# ─────────────────────────────────────────────────────────────────────────────
# THE ODDS API (PRIMARY SOURCE for Connecticut sportsbooks)
# ─────────────────────────────────────────────────────────────────────────────
# Enable The Odds API as primary source for DraftKings/FanDuel (Connecticut)
# Bypasses browser automation and anti-bot detection
USE_ODDS_API=true

# Third-party API that aggregates odds from 40+ sportsbooks
# No browser automation needed, no login required
# Get API key from https://the-odds-api.com/
# Free tier: 500 requests/month (testing)
# Paid: $79-199/month for production use
ODDS_API_KEY=your-odds-api-key-here

# ─────────────────────────────────────────────────────────────────────────────
# PREDICTION MARKETS (Optional - for cross-market arb)
# ─────────────────────────────────────────────────────────────────────────────
# Polymarket: No API key needed (public API)
# Kalshi: Get API key from https://kalshi.com/developers
POLYMARKET_ENABLED=false
KALSHI_ENABLED=false
KALSHI_API_KEY=

# ─────────────────────────────────────────────────────────────────────────────
# PINNACLE (Optional - for CLV tracking)
# ─────────────────────────────────────────────────────────────────────────────
# Pinnacle API for sharp line comparison
# Requires VPN/proxy from non-US location
PINNACLE_ENABLED=false
PINNACLE_API_KEY=

# ─────────────────────────────────────────────────────────────────────────────
# ADVANCED SETTINGS (Optional)
# ─────────────────────────────────────────────────────────────────────────────
# Live polling interval (seconds) - lower = faster but more detection risk
LIVE_POLL_INTERVAL=5
# Pre-game polling interval (seconds)
PREGAME_POLL_INTERVAL=30
# Alert expiration (seconds) - how long bet commands are valid
ALERT_EXPIRATION_SECONDS=300
# Session directory for browser state persistence
SESSION_DIR=/tmp/arb-desk-sessions

# ─────────────────────────────────────────────────────────────────────────────
# DRAFTKINGS INGESTION MODE (Public API vs Authenticated)
# ─────────────────────────────────────────────────────────────────────────────
# Enable DraftKings PUBLIC API ingestion (no login required, faster, more reliable)
# Uses public endpoints: sportsbook-nash.draftkings.com/sites/US-SB/api/v5/
# NOTE: Currently blocked by Akamai Bot Protection - defaults to false
DK_USE_PUBLIC_API=false

# Enable DraftKings AUTHENTICATED ingestion (requires login, browser automation)
# Uses Playwright/cookies/API interception for authenticated scraping
# Both can run in parallel - authenticated is prioritized when both are enabled
DK_USE_AUTH_API=true

# ─────────────────────────────────────────────────────────────────────────────
# STAKE CONFIGURATION (Anti-Detection)
# ─────────────────────────────────────────────────────────────────────────────
# Maximum total stake per arbitrage opportunity (default: $1000)
MAX_TOTAL_STAKE=1000.0
# Minimum total stake (default: $100)
MIN_TOTAL_STAKE=100.0
# Randomize stake amounts to prevent detection (true/false)
RANDOMIZE_STAKES=true
# Stake randomization range (percentage variance, e.g., 0.15 = ±15%)
STAKE_RANDOMIZATION_PCT=0.15

# ─────────────────────────────────────────────────────────────────────────────
# STEALTH ADVISOR (Optional - anti-ban tuning)
# ─────────────────────────────────────────────────────────────────────────────
# These control how aggressively the system protects your accounts.
# The defaults work well for most users. Only change if you know what you're doing.
#
# Win rate that triggers cover bet suggestions (0.0 - 1.0)
STEALTH_MAX_WIN_RATE=0.72
# Max arb bets per bookmaker per day before cooling
STEALTH_MAX_ARBS_PER_DAY=12
# Hours for heat score to decay by half (lower = faster recovery)
STEALTH_HEAT_DECAY_HOURS=18
# Random cover bet probability (0.0 - 1.0, lower = fewer cover bets)
STEALTH_COVER_BET_PROB=0.05

# ─────────────────────────────────────────────────────────────────────────────
# LOGGING CONFIGURATION
# ─────────────────────────────────────────────────────────────────────────────

# Directory for log files (mounted as Docker volume)
LOG_DIR=/var/log/arb-desk
# Minimum log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO
# Log format: "json" for structured logs, "text" for human-readable
LOG_FORMAT=json
# Maximum log file size in MB before rotation
MAX_LOG_SIZE_MB=50
# Number of backup log files to keep
LOG_BACKUP_COUNT=5

